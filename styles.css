  // الساعة الثابتة (افتراضي عربي)
function updateClock() {
  const now = new Date();
  const dateStr = now.toLocaleDateString('ar-EG', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });
  const timeStr = now.toLocaleTimeString('ar-EG', {
    hour: '2-digit', minute: '2-digit'
  });
  document.getElementById('clock').textContent = `${dateStr} — ${timeStr}`;
}
setInterval(updateClock, 1000);
updateClock();

// ترجمة بسيطة عربي <-> إنجليزي
let currentLang = 'ar';
document.getElementById('translateToggle').addEventListener('click', () => {
  currentLang = currentLang === 'ar' ? 'en' : 'ar';
  document.documentElement.lang = currentLang;
  document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';

  // رأس الصفحة
  document.querySelector('.brand-title').textContent = 'Abou El Dahab Store';
  document.querySelector('.brand-sub').textContent =
    currentLang === 'ar'
      ? 'ماركت خاص — مكان واحد لكل خدماتك. اختر الخدمة، وبعدها هنحدد التفاصيل خطوة بخطوة.'
      : 'Private market — one place for all your services. Pick a service and we’ll finalize details step-by-step.';
  document.getElementById('openMarket').textContent = currentLang === 'ar' ? 'دخول الماركت' : 'Open market';
  document.getElementById('devInfo').textContent = currentLang === 'ar' ? 'معلومات للمبرمج' : 'Developer info';
  document.getElementById('translateToggle').textContent = currentLang === 'ar' ? 'ترجمة' : 'Translate';

  // عناوين الأقسام
  document.querySelectorAll('.section-title').forEach((el, i) => {
    const ar = ['خدمات إنشاء مواقع إلكترونية', 'اختر مستوى الخدمة', 'الخدمات المتاحة ضمن إنشاء المواقع'];
    const en = ['Website creation services', 'Choose a service level', 'Available services for websites'];
    el.textContent = currentLang === 'ar' ? ar[i] || el.textContent : en[i] || el.textContent;
  });

  // أزرار "اطلب الآن" / "طلب الخدمة" / "ابدأ"
  document.querySelectorAll('.open-modal').forEach(btn => {
    const kind = btn.getAttribute('data-kind');
    if (kind === 'package' || kind === 'service') {
      btn.textContent = currentLang === 'ar' ? (btn.textContent.includes('طلب') ? 'طلب الخدمة' : 'طلب الخدمة') : 'Order service';
    } else {
      btn.textContent = currentLang === 'ar' ? 'ابدأ' : 'Start';
    }
  });
});

// فتح المودال وتعبئة البيانات
const modal = document.getElementById('requestModal');
const backdrop = modal.querySelector('.modal-backdrop');
const closeBtn = modal.querySelector('.modal-close');
const openers = document.querySelectorAll('.open-modal');

openers.forEach(btn => {
  btn.addEventListener('click', () => {
    const title = btn.getAttribute('data-title') || 'خدمة';
    const price = btn.getAttribute('data-price') || '';
    const days = btn.getAttribute('data-days') || '';

    document.getElementById('selectedItem').value = title;
    document.getElementById('selectedPrice').value = price;
    document.getElementById('selectedDays').value = days;

    // تحديث عنوان المودال والـ placeholder
    const label = currentLang === 'ar' ? 'طلب' : 'Request';
    document.getElementById('modalTitle').textContent = `${label}: ${title}`;
    document.getElementById('notes').placeholder =
      currentLang === 'ar'
        ? `تفاصيل إضافية ${(price && days) ? `(السعر: ${price} — التسليم: ${days} يوم)` : ''}`
        : `Additional details ${(price && days) ? `(Price: ${price} — Delivery: ${days} days)` : ''}`;

    modal.classList.add('show');
    modal.setAttribute('aria-hidden', 'false');
  });
});

function closeModal() {
  modal.classList.remove('show');
  modal.setAttribute('aria-hidden', 'true');
}
backdrop.addEventListener('click', closeModal);
closeBtn.addEventListener('click', closeModal);
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape' && modal.classList.contains('show')) closeModal();
});

// إرسال الطلب على واتساب
document.getElementById('requestForm').addEventListener('submit', (e) => {
  e.preventDefault();
  const name = document.getElementById('clientName').value.trim();
  const wa = document.getElementById('whatsapp').value.trim();
  const notes = document.getElementById('notes').value.trim();
  const item = document.getElementById('selectedItem').value;
  const price = document.getElementById('selectedPrice').value;
  const days = document.getElementById('selectedDays').value;

  const summary = currentLang === 'ar'
    ? `طلب جديد من ${name}\nالخدمة/الباقة: ${item}\n${price ? 'السعر: ' + price + '\n' : ''}${days ? 'التسليم: ' + days + ' يوم\n' : ''}${notes ? 'ملاحظات: ' + notes + '\n' : ''}رقم واتساب: ${wa}\nتم الإنشاء عبر Abou El Dahab Store`
    : `New request from ${name}\nItem: ${item}\n${price ? 'Price: ' + price + '\n' : ''}${days ? 'Delivery: ' + days + ' days\n' : ''}${notes ? 'Notes: ' + notes + '\n' : ''}WhatsApp: ${wa}\nGenerated via Abou El Dahab Store`;

  const myNumber = '201000000000'; // عدّل إلى رقمك بصيغة دولية بدون +
  const url = `https://wa.me/${myNumber}?text=${encodeURIComponent(summary)}`;
  window.open(url, '_blank');
});
